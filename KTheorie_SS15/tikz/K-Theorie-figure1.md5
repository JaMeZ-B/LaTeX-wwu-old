\begingroup \toks 0={macro:->[my brace/.style={decorate, decoration={brace, amplitude=5pt, mirror, raise=5pt}}] \draw [thick] (0,0) node[below]{$0$} rectangle (2,2); \draw [|-|] (0,1.6) -- (0,0.5); \draw [my brace,] (0,1.6) -- (0,0.5) node[midway, left=8pt]{$U_i$}; \foreach \x in {0.3,0.65,...,1.8}{ \draw [gray] (\x ,0.2) -- (\x ,1.8); } \node [below] at (2,0) {$1$}; \par \draw [thick,-to] (2.5,1) -- (4,1) node[midway,above]{$r_i$}; \par \par \node [below] at (7,0) {$1$}; \draw [|-|] (5,1.6) -- (5,0.5); \draw [my brace,] (5,1.6) -- (5,0.5) node[midway, left=8pt]{$U_i$}; \foreach \x in {5.3,5.65,...,6.8}{ \draw [gray] (\x ,0.2) -- (\x ,0.5) .. controls +(90:0.2) and +(270:0.2) .. (7,1.05) .. controls +(90:0.2) and +(270:0.2) .. (\x ,1.6) -- (\x ,1.8); } \draw [gray,->] (5.5,1.05) -- ++(0.7,0); \draw [thick] (5.,0) node[below]{$0$} rectangle (7,2); }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
