\begingroup \toks 0={macro:->[scale=1.2, every pin edge/.style={black!80, very thin}] \par \path (5,0) coordinate (mids1) +(40:1) coordinate (fx) +(20:1) coordinate (br1) ; \path (fx) + (0.2,0) coordinate (starth1); \path (-2,-1) coordinate (h0x) ++ (0.2,0.3) coordinate (endh0); \path (0.1,0.1) coordinate (x) ++ (-0.3,0) coordinate (starth0); \path (mids1) ++ (2,-1) coordinate (midv1) + (-0.3,0) coordinate (leftv1) + (0.3,0) coordinate (rightv1) +(0,0.2) coordinate (endh1); \par \draw (-1,0) arc (180:360:1cm and 0.5cm); \draw [dashed, black!60] (-1,0) arc (180:0:1cm and 0.5cm); \draw (0,1) arc (90:270:0.5cm and 1cm); \draw [dashed, black!60] (0,1) arc (90:-90:0.5cm and 1cm); \draw (0,0) circle (1cm); \shade [ball color=blue!20!white,opacity=0.20] (0,0) circle (1cm); \node [] at (-1,1) {$N=S^2$}; \par \begin {scope} \clip (x) circle[radius=0.25]; \foreach \y in {0.5,0.45,...,-0.3}\draw [black!60,line width=0.25mm, opacity=0.5] (-0.5,\y ) .. controls +(-25:0.4) and +(205:0.4) .. (0.5,\y ); \end {scope} \draw [] (x) circle[radius=0.25] ++ (0.43,0) node {$U_0$}; \draw [fill=IndianRed3, thick] (x) circle[radius=0.04] node[pin={[pin distance=1.5ex]230:$x$}]{ }; \par \draw [IndianRed3, -to, thick] (starth0) to[bend right, "$h_0$"' near end] (endh0); \par \begin {scope} \clip (h0x) circle[radius=0.3]; \foreach \x in {0,-0.1,...,-1}\draw [IndianRed3!70,line width=0.25mm] (-2.5,\x )--(-1.5,\x -1); \end {scope} \draw [IndianRed3, thick] (h0x) circle[radius=0.3] ++ (0.5,0) node {$V_0$}; \draw [fill=IndianRed3, thick] (h0x) circle[radius=0.04] node[pin=230:$h_0(x)$]{ }; \par \draw [-to, thick] (1.5,0) -- (3.5,0) node[midway, above]{$f$}; \par \draw [thick] (mids1) circle[radius=1]; \path (mids1) ++ (-1,1) node[] {$M=S^1$}; \draw [(-), DodgerBlue3, thick] (br1) arc(20:60:1) node[midway, below left] {$U_1$}; \draw [fill=DodgerBlue3, thick] (fx) circle[radius=0.04] node[pin=above right:$f(x)$]{ }; \par \draw [(-), DodgerBlue3, thick] (leftv1) node[left] {$V_1$} -- (rightv1); \draw [fill=DodgerBlue3, thick] (midv1) circle[radius=0.04] node[pin=310:$h_1 \big ( f(x) \big ) $ ] { }; \par \draw [DodgerBlue3, -to, thick] (starth1) to[bend left, "$h_1$" near end] (endh1); }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
